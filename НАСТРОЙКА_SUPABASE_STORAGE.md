# üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase Storage –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞!

–î–ª—è —Ä–∞–±–æ—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å **bucket** (—Ö—Ä–∞–Ω–∏–ª–∏—â–µ) –≤ Supabase.

---

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [https://supabase.com](https://supabase.com)
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç
3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç: `jqfifytmlpofxzwkeavm`

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ Storage Bucket

1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Storage** üóÑÔ∏è
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"New bucket"** (–°–æ–∑–¥–∞—Ç—å bucket)
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **Name (–ò–º—è):** `homework-files`
   - **Public bucket:** ‚úÖ **–í–ö–õ** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
   - **File size limit:** –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (50MB) –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å
4. –ù–∞–∂–º–∏—Ç–µ **"Create bucket"**

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (RLS)

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Supabase Storage —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤.

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –†–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ–º (–ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±)

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π bucket `homework-files`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Policies"**
3. –ù–∞–∂–º–∏—Ç–µ **"New Policy"**
4. –í—ã–±–µ—Ä–∏—Ç–µ **"Custom"**
5. –°–æ–∑–¥–∞–π—Ç–µ –¥–≤–µ –ø–æ–ª–∏—Ç–∏–∫–∏:

**–ü–æ–ª–∏—Ç–∏–∫–∞ 1: –†–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –≤—Å–µ–º**
```sql
CREATE POLICY "Allow public uploads"
ON storage.objects FOR INSERT
TO public
WITH CHECK (bucket_id = 'homework-files');
```

**–ü–æ–ª–∏—Ç–∏–∫–∞ 2: –†–∞–∑—Ä–µ—à–∏—Ç—å —á—Ç–µ–Ω–∏–µ –≤—Å–µ–º**
```sql
CREATE POLICY "Allow public reads"
ON storage.objects FOR SELECT
TO public
USING (bucket_id = 'homework-files');
```

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –û—Ç–∫–ª—é—á–∏—Ç—å RLS (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

1. –û—Ç–∫—Ä–æ–π—Ç–µ bucket `homework-files`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Configuration"**
3. –ù–∞–π–¥–∏—Ç–µ **"Enable RLS"**
4. **–û—Ç–∫–ª—é—á–∏—Ç–µ** RLS

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –ü—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ RLS –ª—é–±–æ–π –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏ —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã!

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ —Å —Ñ–∞–π–ª–æ–º:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É **–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è**
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ
3. –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–∞–π–ª
4. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ"**

–ï—Å–ª–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- ‚úÖ –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏ backend –±—É–¥–µ—Ç: `SUCCESS: File uploaded to Supabase Storage`
- ‚úÖ –§–∞–π–ª –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –∑–∞–¥–∞–Ω–∏—è

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞:
- ‚ùå –í –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∞ —á—Ç–æ –¥–µ–ª–∞—Ç—å
- ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ bucket —Å–æ–∑–¥–∞–Ω –∏ –ø—É–±–ª–∏—á–Ω—ã–π
- ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞

---

## üîç –ì–¥–µ —É–≤–∏–¥–µ—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Storage** –≤ Supabase Dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ bucket `homework-files`
3. –í—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Å–ø–∏—Å–∫–æ–º

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Backend (app.py)
```python
# –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª –≤ Supabase Storage
supabase.storage.from_("homework-files").upload(
    path=unique_filename,
    file=file_content,
    file_options={"content-type": content_type}
)

# –ü–æ–ª—É—á–∞–µ–º –ø—É–±–ª–∏—á–Ω—ã–π URL
public_url = supabase.storage.from_("homework-files").get_public_url(unique_filename)
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
- –ü—É–±–ª–∏—á–Ω—ã–π URL —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–æ–ª–µ `image_url` —Ç–∞–±–ª–∏—Ü—ã `homework`
- –§–æ—Ä–º–∞—Ç URL: `https://jqfifytmlpofxzwkeavm.supabase.co/storage/v1/object/public/homework-files/xxxxx.jpg`

---

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Supabase Storage

‚úÖ **–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** ‚Äî —Ñ–∞–π–ª—ã –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞  
‚úÖ **CDN** ‚Äî –±—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è –æ –º–µ—Å—Ç–µ –Ω–∞ –¥–∏—Å–∫–µ  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ RLS  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–¥–æ–ø. —Ñ—É–Ω–∫—Ü–∏—è)

---

## ‚ö†Ô∏è –õ–∏–º–∏—Ç—ã –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞

- **–•—Ä–∞–Ω–∏–ª–∏—â–µ:** 1 GB
- **–¢—Ä–∞—Ñ–∏–∫:** 2 GB/–º–µ—Å—è—Ü
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤:** –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ

–ï—Å–ª–∏ –ø—Ä–µ–≤—ã—Å–∏—Ç–µ –ª–∏–º–∏—Ç—ã, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω.

---

**–ì–æ—Ç–æ–≤–æ! –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ –æ–±–ª–∞–∫–µ Supabase! ‚òÅÔ∏è**

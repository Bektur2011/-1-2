# üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é Backend (401 –æ—à–∏–±–∫–∞)

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

–§–∞–π–ª `StudyCore/backend/app.py` –±—ã–ª –æ–±–Ω–æ–≤–ª–µ–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π Supabase –∑–∞–ø—Ä–æ—Å**
   ```python
   response = supabase.table('users').select('*').eq('password', password).execute()
   ```
   - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `.single()` (–≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `.eq('password', password)` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

2. **‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**
   ```python
   if not response.data:
       return jsonify({"error": "–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å"}), 401
   ```
   - `response.data` - —ç—Ç–æ –º–∞—Å—Å–∏–≤, –∞ –Ω–µ None
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –º–∞—Å—Å–∏–≤–µ

3. **‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º**
   ```python
   user = response.data[0]  # –ë–µ—Ä–µ–º –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   ```
   - –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á—Ç–æ –º–∞—Å—Å–∏–≤ –Ω–µ –ø—É—Å—Ç–æ–π

4. **‚úÖ –ù–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–∞—Ä–æ–ª—å**
   ```python
   response_data = {
       "id": user["id"],
       "login": user["login"],
       "name": user["name"],
       "role": user["role"],
       "gender": user["gender"]
   }
   # –ü–∞—Ä–æ–ª—å –ù–ï –≤–∫–ª—é—á–µ–Ω –≤ –æ—Ç–≤–µ—Ç!
   ```

5. **‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
   - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞ –≤ –ë–î
   - –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –æ—à–∏–±–∫–∏

---

## üöÄ –ö–∞–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Backend

### –®–∞–≥ 1: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä
–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω backend –Ω–∞–∂–º–∏—Ç–µ:
```
Ctrl + C
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é backend
```bash
cd StudyCore/backend
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –∑–∞–Ω–æ–≤–æ
```bash
python app.py
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
Server started on port 5000
 * Serving Flask app 'app'
 * Debug mode: off
WARNING: This is a development server.
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
```

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –¢–µ—Å—Ç 1: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
1. –û—Ç–∫—Ä–æ–π—Ç–µ frontend (http://localhost:5173)
2. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: `N3PqH8M6` (–ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–µ–∫—Ç—É—Ä - Moderator)
3. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω
- ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /menu
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏ backend:
  ```
  LOGIN ATTEMPT
  PASSWORD FROM CLIENT: 'N3PqH8M6'
  USER FOUND: bb34_14 (–ë–µ–∫—Ç—É—Ä)
  LOGIN SUCCESSFUL for user: –ë–µ–∫—Ç—É—Ä
  ```

### –¢–µ—Å—Ç 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
1. –í–≤–µ–¥–∏—Ç–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å: `wrongpassword`
2. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å"
- ‚ùå –°—Ç–∞—Ç—É—Å 401
- ‚ùå –í –∫–æ–Ω—Å–æ–ª–∏ backend:
  ```
  LOGIN ATTEMPT
  PASSWORD FROM CLIENT: 'wrongpassword'
  LOGIN FAILED: No user found with this password
  ```

---

## üìã –°–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–æ–ª–µ–π

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –ø–∞—Ä–æ–ª–∏ –∏–∑ –≤–∞—à–µ–π –ë–î:

| –ü–∞—Ä–æ–ª—å | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | –†–æ–ª—å |
|--------|-------------|------|
| `N3PqH8M6` | –ë–µ–∫—Ç—É—Ä | Moderator |
| `9XK4D7S2` | –î–∞—Ç–∫–∞–π—ã–º | Admin |
| `F6RZ8C5M` | –ê—è–Ω–∞ | Admin |
| `7QX2A9LJ` | –°–∞–±–∏–Ω–∞ | Admin |
| `X7fA9qL2` | –ú—ã—Ä–∑–∞–±–µ–∫ | Student |

---

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ï—Å–ª–∏ –≤—Å—ë –µ—â—ë –ø–æ–ª—É—á–∞–µ—Ç–µ 401:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å backend**
   - –í—ã –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–∞—Ä–æ–ª—å —Å–æ–≤–ø–∞–¥–∞–µ—Ç (–±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤)

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Supabase**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Table Editor ‚Üí users
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–∞—Ä–æ–ª—å –µ—Å—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–µ

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   ```bash
   # –í StudyCore/backend/.env –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
   SUPABASE_URL=https://jqfifytmlpofxzwkeavm.supabase.co
   SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS**
   - –ï—Å–ª–∏ frontend –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É, CORS —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ:

**–ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```python
response = supabase.table('users').select('*').eq('password', password).single()
# ‚ùå .single() –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

if response.data is None:
    # ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```

**–°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```python
response = supabase.table('users').select('*').eq('password', password).execute()
# ‚úÖ .execute() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤

if not response.data:
    # ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –º–∞—Å—Å–∏–≤ –Ω–µ –ø—É—Å—Ç–æ–π
    return jsonify({"error": "–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å"}), 401

user = response.data[0]  # ‚úÖ –ë–µ—Ä–µ–º –ø–µ—Ä–≤–æ–≥–æ –∏–∑ –º–∞—Å—Å–∏–≤–∞
```

---

## ‚úÖ Checklist –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

- [ ] Backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 5000
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- [ ] –í—Ö–æ–¥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í—Ö–æ–¥ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401
- [ ] –í –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏
- [ ] Frontend –ø–æ–ª—É—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞—ë—Ç—Å—è

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ backend
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab (F12 ‚Üí Network) –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ /api/login
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–ª–∏ —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏

---

**–ê–≤—Ç–æ—Ä**: Kombai AI Assistant  
**–î–∞—Ç–∞**: 2026-01-19  
**–í–µ—Ä—Å–∏—è**: 2.1.0
